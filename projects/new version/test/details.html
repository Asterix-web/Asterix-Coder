<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
        <title>Al Jawhara Market | Fresh Food & Groceries</title>
        <meta name="description" content="Welcome to Al Jawhara Market! Your trusted source for fresh food, quality groceries, dairy products, snacks, beverages, and daily essentials at affordable prices.">
        <meta name="keywords" content="Al Jawhara Market, groceries, fresh food, dairy products, snacks, beverages, fruits, vegetables, bakery, grocery store, food market, local market, quality food, affordable prices">
        <meta name="author" content="Al Jawhara Market Team">
      
        <!-- Open Graph / Facebook -->
        <meta property="og:title" content="Al Jawhara Market | Fresh Food & Groceries">
        <meta property="og:description" content="Discover the best selection of groceries, fresh food, snacks, and essentials at Al Jawhara Market. Quality products at unbeatable prices!">
        <meta property="og:image" content="https://yourdomain.com/images/al-jawhara-market-og.jpg">
        <meta property="og:url" content="https://yourdomain.com/">
        <meta property="og:type" content="website">
      
        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Al Jawhara Market | Fresh Food & Groceries">
        <meta name="twitter:description" content="Shop your daily groceries and fresh food at Al Jawhara Market. Where quality meets value.">
        <meta name="twitter:image" content="https://yourdomain.com/images/al-jawhara-market-twitter.jpg">
      
        <!-- Favicon -->
        <link rel="icon" href="https://yourdomain.com/images/jawhara-icon.png" type="image/png">
        <link rel="stylesheet" href="CSS/style.css">
        <link rel="stylesheet" href="CSS/style copy.css">
        <link rel="stylesheet" href="CSS/bootstrap.min.css">
      </head>

<body>

    
  <header>
      
    <!-- Topbar start -->
    <div class="container-fluid ">
        <div class="container topbar d-none d-lg-block">
        </div>
        <div class="container">
            <nav class="navbar navbar-light navbar-expand-lg py-3">
                <a href="index.html" class="navbar-brand">
                    <h1 class="mb-0">EL Gawhara </h1>
                </a>
                  </div>
                  <h1 id="category-title">details product</h1>
            </nav>
        </div>
    </div>
    <!-- Topbar End -->
</header>

        <a href="cart.html" class="cart-button">ğŸ›’</a>
        <div id="product-details" class="product-details"></div>


        
        <!-- Footer Start -->

        <div class="container py-4">
            <div class="border-top border-secondary pb-4"></div>
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    &copy; <a class="border-bottom" href="#">El Gawhara Marker</a>, All Right Reserved.
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <!--/*** This template is free as long as you keep the below authorâ€™s credit link/attribution link/backlink. ***/-->
                    <!--/*** If you'd like to use the template without the below authorâ€™s credit link/attribution link/backlink, ***/-->
                    <!--/*** you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". ***/-->
                    Designed By <a class="border-bottom" href="https://zeyad-zahran.github.io/Portfolio/">Zeyad Zahran</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


<!-------------------------------------- script --------------------------------------->

<script src="js/data.js"></script>
<script src="js/script.js"></script>

<script>
  
  document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
        const productId = parseInt(urlParams.get("id"));
        const category = urlParams.get("category");
        const productDetailsDiv = document.getElementById("product-details");

        if (category && productsData[category]) {
            const product = productsData[category].find(p => p.id === productId);
            if (product) {
              productDetailsDiv.innerHTML = `
            <center>
              <div class="product-details">
                    <h2 id="brn">${product.name}</h2>
                    <img src="${product.img}" alt="${product.name}">
                    <p id="ppr"><strong>Price:</strong> ${product.price} EG</p>
                    <button id="bf" onclick="buyNow()">Buy Now</button>
                    <button id="bf" onclick='addToCart(${JSON.stringify({...product, category})})'>Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
              </div>
            </center>
                `;
            } else {
                productDetailsDiv.innerHTML = "<p>the product is notfound</p>";
            }
        } else {
            productDetailsDiv.innerHTML = "<p>notfound</p>";
        }
    });
    
    const storedUserData = JSON.parse(localStorage.getItem('userData'));
    
    if (storedUserData) {
      const name = storedUserData.name;
      const gender = storedUserData.gender;
      const phone = storedUserData.phone;
    
      console.log(`Name: ${name}`);
      console.log(`Gender: ${gender}`);
      console.log(`Phone: ${phone}`);
      
      document.getElementById('userName').textContent = name; // Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø³Ù… ÙÙŠ Ø¹Ù†ØµØ± HTML
    } else {
      console.log('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ localStorage.');
    }
    
function buyNow() {
    let formContainer = document.getElementById("checkoutForm");

    let productName = document.getElementById("brn").textContent;
    let productPrice = document.getElementById("ppr").textContent;

    if (!formContainer) {
        formContainer = document.createElement("div");
        formContainer.id = "checkoutForm";
        formContainer.style.display = "block";
        formContainer.style.marginTop = "20px";
        formContainer.style.padding = "15px";
        formContainer.style.border = "1px solid #ccc";
        formContainer.style.background = "#f9f9f9";
        
        formContainer.innerHTML = `
    <center>
        <h2>Checkout</h2>
        <form id="purchaseForm">
            <label>Name:</label>
            <input placeholder="Enter your name" type="text" id="name" required> <br><br>
            <label>Address:</label>
            <input placeholder="Enter your address" type="text" id="address" required> <br><br>
            <label>Phone:</label>
            <input placeholder="Enter your phone number" type="tel" id="phone" required> <br><br>
            <label>Email:</label>
            <input placeholder="Enter your email" type="email" id="email"> <br><br>
            <label>Amount:</label>
            <input placeholder="Enter amount" type="number" id="amount" required> <br><br>
            <label>Product Name:</label>
            <input type="text" id="productInput" value="${productName}" readonly> <br><br>
            <label>Price:</label>
            <input type="text" id="priceInput" value="${productPrice}" readonly> <br><br>
            <input type="submit" value="Confirm Purchase">
            <input type="button" value="Cancel" onclick="document.getElementById('checkoutForm').style.display = 'none'">
        </form>
    </center>
        `;
        document.getElementById("bf").after(formContainer);

        document.getElementById("purchaseForm").addEventListener("submit", confirmPurchase);
    } else {
        document.getElementById("productInput").value = productName;
        document.getElementById("priceInput").value = productPrice;
        formContainer.style.display = "block";
    }
}

function confirmPurchase(event) {
    event.preventDefault(); 

    const customerName = document.getElementById("name").value;
    const address = document.getElementById("address").value;
    const phone = document.getElementById("phone").value;
    const email = document.getElementById("email").value;
    const amount = document.getElementById("amount").value;
    const productName = document.getElementById("productInput").value;
    const productPrice = document.getElementById("priceInput").value;

    if (!customerName || !address || !phone || !amount) {
        alert("Please fill in all required fields.");
        return;
    }

    const formData = {
        name: customerName,
        address: address,
        phone: phone,
        email: email,
        amount: amount,
        product: productName,
        price: productPrice
    };

    fetch("https://formspree.io/f/mgvewbgd", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(formData)
    })
    .then(response => {
        if (response.ok) {
            alert("Purchase confirmed! Thank you, " + customerName);
            document.getElementById("purchaseForm").reset(); 
            document.getElementById("checkoutForm").style.display = "none";
        } else {
            alert("Failed to send order. Please try again.");
        }
    })
    .catch(error => {
        console.error("Error:", error);
        alert("An error occurred. Please try again.");
    });
}

function addToCart(product) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
        let existingProduct = cart.find(item => item.id === product.id && item.category === product.category);
        if (existingProduct) {
            existingProduct.quantity += 1;  // Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯ Ø²ÙˆØ¯ Ø§Ù„ÙƒÙ…ÙŠØ©
        } else {
            product.quantity = 1;  // Ù„Ùˆ Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯ Ø¶ÙŠÙÙ‡ Ù…Ø¹ ÙƒÙ…ÙŠØ© 1
            cart.push(product);
        }
    
        localStorage.setItem('cart', JSON.stringify(cart));
        alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©!");
    }


</script>



</body>
</html>